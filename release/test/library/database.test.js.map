{"version":3,"sources":["../../../source/test/library/database.test.js"],"names":["FileSystem","Path","Test","Migration","test","databasePath","ensureDir","dirname","onInstall","database","onOpen","is","installMigration","title","numberOfChanges"],"mappings":"AAAA,OAAOA,UAAP,MAAuB,UAAvB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,IAAP,MAAiB,KAAjB;;AAEA,SAASC,SAAT,QAA0B,gBAA1B;;AAEAD,IAAI,CAAC,gEAAD,EAAmE,MAAOE,IAAP,IAAgB;;AAErF,MAAIC,YAAY,GAAG,qBAAnB;AACA,QAAML,UAAU,CAACM,SAAX,CAAqBL,IAAI,CAACM,OAAL,CAAaF,YAAb,CAArB,CAAN;;AAEA,QAAMF,SAAS,CAACK,SAAV,CAAqBC,QAAD,IAAc;AACtC,WAAOA,QAAQ,CAACC,MAAT,CAAgB,YAAY;AACjCN,MAAAA,IAAI,CAACO,EAAL,CAAQ,CAAC,MAAMF,QAAQ,CAACG,gBAAT,CAA0BR,IAAI,CAACS,KAA/B,CAAP,EAA8CC,eAAtD,EAAuE,CAAvE;AACD,KAFM,CAAP;AAGD,GAJK,EAIHT,YAJG,CAAN;;AAMD,CAXG,CAAJ","sourcesContent":["import FileSystem from 'fs-extra'\nimport Path from 'path'\nimport Test from 'ava'\n\nimport { Migration } from './migration.js'\n\nTest('Database.run(statement, parameter) returns { numberOfChanges }', async (test) => {\n\n  let databasePath = 'process/data/run.db'\n  await FileSystem.ensureDir(Path.dirname(databasePath))\n\n  await Migration.onInstall((database) => {\n    return database.onOpen(async () => {\n      test.is((await database.installMigration(test.title)).numberOfChanges, 1)\n    })\n  }, databasePath)\n\n})\n"],"file":"database.test.js"}